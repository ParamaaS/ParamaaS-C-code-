/*/
- Paramaa Sawanpanyalert -
Lang : c++
/*/
#include <bits/stdc++.h>
using namespace std;
int n,m,c,c2,che,idx;
int u,l,r,d;
char s[55][55],ss[50];
int L,U,R,D;
main()
{
	scanf("%d%d",&n,&m);
	scanf("%d%d%d%d",&u,&l,&r,&d);
	for(c=0;c<n;c++)
	{
		scanf("%s",ss);
		che=0;
		for(c2=0;c2<m;c2++)
		{
			s[c+30][c2+30]=ss[che];
			che++;
		}
	}
	che=0;
	for(c=29;c>29-u;c--)//up
	{
		for(c2=30-l;c2<30+r+m;c2++)
		{
			if(che%2==0)
			{
				s[c][c2]='A';
				che++;
			}
			else
			{
				s[c][c2]='A';
				che++;
			}
		}	
	}
	che=0;
	for(c=30;c<=30+n;c++)//right
	{
		for(c2=30+m;c2<30+m+r;c2++)
		{
			if(che%2==0)
			{
				s[c][c2]='A';
				che++;
			}
			else
			{
				s[c][c2]='A';
				che++;
			}
		}	
	}
	che=0;
	for(c=30;c<=30+n;c++)//left
	{
		for(c2=30-l;c2<30;c2++)
		{
			if(che%2==0)
			{
				s[c][c2]='A';
				che++;
			}
			else
			{
				s[c][c2]='A';
				che++;
			}
		}	
	}
	che=0;
	for(c=30+n;c<30+n+d;c++)//down
	{
		for(c2=30-l;c2<30+r+m;c2++)
		{
			if(che%2==0)
			{
				s[c][c2]='A';
				che++;
			}
			else
			{
				s[c][c2]='A';
				che++;
			}
		}	
	}
	//bound
	/*/
	che=0;
	for(c=0;c<30;c++)//Left
	{
		for(c2=0;c2<=50;c2++)
		{
			if(s[c][c2]=='A'||s[c][c2]!=0)
			{
				L=c;
				che=1;
				break;
			}
		}
		if(che)
		{
			break;
		}
	}
	che=0;
	for(c=50;c>=30;c--)//Right
	{
		for(c2=0;c2<=50;c2++)
		{
			if(s[c2][c]=='A'||s[c2][c]!=0)
			{
				R=c;
				che=1;
				break;
			}
		}
		if(che)
		{
			break;
		}
	}
	che=0;
	for(c=0;c<=30;c++)//Up
	{
		for(c2=0;c2<=50;c2++)
		{
			if(s[c][c2]=='A'||s[c][c2]!=0)
			{
				U=c;
				che=1;
				break;
			}
		}
		if(che)
		{
			break;
		}
	}
	che=0;
	for(c=50;c>=30;c--)//Down
	{
		for(c2=0;c2<=50;c2++)
		{
			if(s[c][c2]=='A'||s[c][c2]!=0)
			{
				D=c;
				che=1;
				break;
			}
		}
		if(che)
		{
			break;
		}
	}/*/
	//printf(">>%d %d %d %d\n",U,L,R,D);
	che=0;
	//*/
	for(c=30-u;c<30+n+d;c++)
	{
		for(c2=30-l;c2<=30+r+m;c2++)
		{
			if(s[c][c2]=='A')
			{
				//printf(" %d ",che);
				if(che%2==0)
				{
					printf("%c",'#');
					
				}
				else if(che%2==1)
				{
					printf("%c",'.');
				}
			}
			else if(s[c][c2]>=97)
			{
				printf("%c",s[c][c2]);
			}
			che++;
		}
		if((l+r+m)%2!=0)
		{
			che++;
		}
		printf("\n");
	}
	//*/
}
